/**
 * Component: Drawer
 */

@keyframes fadein {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}

@keyframes slidein {
	from {
		transform: translateX(0);
	}

	to {
		transform: translateX(-100%);
	}
}

.wc-block-components-drawer {
	position: absolute;
	top: 0;
	left: 100%;
	width: min( 30rem, 100vw );
	height: 100%;
	background-color: var(--background-color);
	transform: translateX(-100%);

	&:after {
		content: "";
		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		border-style: solid;
		border-width: 0 0 0 1px;
		display: block;
		opacity: .3;
		pointer-events: none;
	}

	@media screen and (prefers-reduced-motion: reduce) {
		animation-name: none !important;
		transition: none !important;
	}

	.components-modal__content {
		padding: var(--wp--style--block-gap);
	}

	.components-modal__header {
		position: relative;

		// Close button.
		.components-button {
			@include button-nude();
			opacity: 0.5;

			&:is( :hover, :focus ) {
				opacity: 1;
			}

			svg {
				display: block;
				width: 2.5em;
				height: 2.5em;
			}

			span {
				@include hide-visually(); // Hide the popover
			}
		}
	}
}

.wc-block-components-drawer__screen-overlay {
	position: fixed;
	z-index: 9999;
	top: var(--screen-top-offset);
	right: 0;
	bottom: 0;
	left: 0;
	background-color: rgba(0,0,0,0.7);
	transition: opacity var(--transition-duration);
	z-index: 9999;
	opacity: 1;

	@media screen and (prefers-reduced-motion: reduce) {
		animation-name: none !important;
		transition: none !important;
	}
}

.wc-block-components-drawer__screen-overlay--with-slide-out {
	transition: opacity var(--transition-duration);
}

// We can't use transition for the slide-in animation because the element
// doesn't exist in the DOM when not open. Instead, use an animation that
// is triggered when the element is appended to the DOM.
.wc-block-components-drawer__screen-overlay--with-slide-in {
	animation-duration: var(--transition-duration);
	animation-name: fadein;
}

.wc-block-components-drawer__screen-overlay--is-hidden {
	pointer-events: none;
	opacity: 0;
}

.wc-block-components-drawer__screen-overlay--with-slide-out .wc-block-components-drawer {
	transition: transform var(--transition-duration);
}

.wc-block-components-drawer__screen-overlay--with-slide-in .wc-block-components-drawer {
	animation-duration: var(--transition-duration);
	animation-name: slidein;
}

.wc-block-components-drawer__screen-overlay--is-hidden .wc-block-components-drawer {
	transform: translateX(0);
}
