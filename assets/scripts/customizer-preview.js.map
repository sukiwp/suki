{"version":3,"file":"customizer-preview.js","mappings":"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","sources":["webpack://suki/./src/scripts/customizer-preview.js"],"sourcesContent":["/**\n * Customizer Preview's post messages\n */\nif ( undefined !== sukiCustomizerPreviewData && undefined !== sukiCustomizerPreviewData.postMessages ) {\n\t/**\n\t * PostMessage: Output CSS.\n\t *\n\t * @param {string} key\n\t * @param {Array}  rules\n\t * @param {string} newValue\n\t */\n\tconst postMessageCSS = function( key, rules, newValue ) {\n\t\tconst styleID = 'suki-customize-preview-css-' + key;\n\t\tconst cssArray = {};\n\t\tlet $style = document.getElementById( styleID );\n\t\tlet css = '';\n\n\t\t// Create <style> tag if doesn't exist.\n\t\tif ( ! $style ) {\n\t\t\t$style = document.createElement( 'style' );\n\t\t\t$style.id = styleID;\n\t\t\t$style.type = 'text/css';\n\n\t\t\t// Append <style> tag to <head>.\n\t\t\tdocument.head.appendChild( $style );\n\t\t}\n\n\t\t// If value is an empty string, reset CSS and then abort.\n\t\tif ( '' === newValue ) {\n\t\t\t$style.textContent = '';\n\t\t\treturn;\n\t\t}\n\n\t\trules.forEach( function( rule ) {\n\t\t\tlet value = newValue;\n\t\t\tlet formattedValue;\n\n\t\t\t// Convert array value into string.\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\tlet sanitizedValue = [];\n\n\t\t\t\tsanitizedValue = value.map( function( subvalue ) {\n\t\t\t\t\treturn '' === subvalue ? 0 : subvalue;\n\t\t\t\t} );\n\n\t\t\t\tvalue = sanitizedValue.join( ' ' );\n\t\t\t}\n\n\t\t\tif ( rule.function && rule.function.name ) {\n\t\t\t\tswitch ( rule.function.name ) {\n\t\t\t\t\tcase 'explode_value':\n\t\t\t\t\t\tif ( undefined === rule.function.args[ 0 ] ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst index = rule.function.args[ 0 ];\n\n\t\t\t\t\t\tif ( isNaN( index ) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst array = value.split( ' ' );\n\n\t\t\t\t\t\tvalue = undefined !== array[ index ] ? array[ index ] : '';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'scale_dimensions':\n\t\t\t\t\t\tif ( undefined === rule.function.args[ 0 ] ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst scale = rule.function.args[ 0 ];\n\n\t\t\t\t\t\tif ( isNaN( scale ) ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst parts = value.split( ' ' );\n\t\t\t\t\t\tlet newParts;\n\n\t\t\t\t\t\tparts.forEach( function( part, i ) {\n\t\t\t\t\t\t\tconst number = parseFloat( part );\n\t\t\t\t\t\t\tconst unit = part.replace( number, '' );\n\n\t\t\t\t\t\t\tnewParts[ i ] = ( number * scale ).toString() + unit;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Build new value.\n\t\t\t\t\t\tvalue = newParts.join( ' ' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( undefined === rule.element || undefined === rule.property ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trule.media = rule.media || 'global';\n\t\t\trule.pattern = rule.pattern || '$';\n\n\t\t\t// Check if \"key\" attribute is defined and value is an assosiative array.\n\t\t\tif ( 'object' === typeof value ) {\n\t\t\t\tif ( undefined !== rule.key && undefined !== value[ rule.key ] ) {\n\t\t\t\t\t// Fetch the property value using the key from setting value.\n\t\t\t\t\tformattedValue = rule.pattern.replace( '$', value[ rule.key ] );\n\t\t\t\t} else {\n\t\t\t\t\tlet concatValue;\n\t\t\t\t\tvalue.forEach( function( valueItem ) {\n\t\t\t\t\t\tconcatValue.push( rule.pattern.replace( '$', valueItem ) );\n\t\t\t\t\t} );\n\t\t\t\t\tformattedValue = concatValue.join( ' ' );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Define new value based on the specified pattern.\n\t\t\t\tformattedValue = rule.pattern.replace( '$', value );\n\t\t\t}\n\n\t\t\t// Define properties.\n\t\t\tif ( undefined === cssArray[ rule.media ] ) {\n\t\t\t\tcssArray[ rule.media ] = {};\n\t\t\t}\n\t\t\tif ( undefined === cssArray[ rule.media ][ rule.element ] ) {\n\t\t\t\tcssArray[ rule.media ][ rule.element ] = {};\n\t\t\t}\n\n\t\t\t// Save the value into a formatted array.\n\t\t\tcssArray[ rule.media ][ rule.element ][ rule.property ] = formattedValue;\n\t\t} );\n\n\t\t// Loop into the sorted array to build CSS string.\n\t\tObject.keys( cssArray ).forEach( function( media ) {\n\t\t\tconst selectors = cssArray[ media ];\n\n\t\t\tif ( 'global' !== media ) {\n\t\t\t\tcss += media + '{';\n\t\t\t}\n\n\t\t\tObject.keys( selectors ).forEach( function( selector ) {\n\t\t\t\tconst properties = selectors[ selector ];\n\n\t\t\t\tcss += selector + '{';\n\n\t\t\t\tObject.keys( properties ).forEach( function( property ) {\n\t\t\t\t\tconst value = properties[ property ];\n\n\t\t\t\t\tcss += property + ':' + value + ';';\n\t\t\t\t} );\n\n\t\t\t\tcss += '}';\n\t\t\t} );\n\n\t\t\tif ( 'global' !== media ) {\n\t\t\t\tcss += '}';\n\t\t\t}\n\t\t} );\n\n\t\t// Add CSS string to <style> tag.\n\t\t$style.textContent = css;\n\t};\n\n\t/**\n\t * PostMessage: Change class.\n\t *\n\t * @param {string} key\n\t * @param {Array}  rules\n\t * @param {string} newValue\n\t */\n\tconst postMessageClass = function( key, rules, newValue ) {\n\t\trules.forEach( function( rule ) {\n\t\t\tlet value = newValue;\n\n\t\t\tif ( 'boolean' === typeof ( value ) ) {\n\t\t\t\tvalue = value ? 1 : 0;\n\t\t\t}\n\n\t\t\tif ( undefined === rule.element ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trule.pattern = rule.pattern || '$';\n\n\t\t\tconst elements = [ ...document.querySelectorAll( rule.element ) ];\n\t\t\tconst regex = new RegExp( rule.pattern.replace( '$', '[\\\\w\\\\-]+' ), 'i' );\n\t\t\tconst formattedValue = rule.pattern.replace( '$', value );\n\n\t\t\t// Change class on all targeted elements.\n\t\t\telements.forEach( function( element ) {\n\t\t\t\tif ( element.className.match( regex ) ) {\n\t\t\t\t\telement.className = element.className.replace( regex, formattedValue );\n\t\t\t\t} else {\n\t\t\t\t\telement.className += ' ' + formattedValue;\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t};\n\n\t/**\n\t * PostMessage: Change HTML.\n\t *\n\t * @param {string} key\n\t * @param {Array}  rules\n\t * @param {string} newValue\n\t */\n\tconst postMessageHTML = function( key, rules, newValue ) {\n\t\trules.forEach( function( rule ) {\n\t\t\tconst value = newValue;\n\n\t\t\tif ( undefined === rule.element ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trule.pattern = rule.pattern || '$';\n\n\t\t\tconst elements = [ ...document.querySelectorAll( rule.element ) ];\n\t\t\tconst formattedValue = rule.pattern.replace( '$', value );\n\n\t\t\t// Change innerHTML on all targeted elements.\n\t\t\telements.forEach( function( element ) {\n\t\t\t\tif ( undefined !== rule.property ) {\n\t\t\t\t\telement.setAttribute( rule.property, formattedValue );\n\t\t\t\t} else {\n\t\t\t\t\telement.innerHTML = formattedValue;\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t};\n\n\t/**\n\t * PostMessage: Embed font to page and set font-family CSS.\n\t *\n\t * @param {string} key\n\t * @param {Array}  rules\n\t * @param {string} newValue\n\t */\n\tconst postMessageFont = function( key, rules, newValue ) {\n\t\t// Fallback compatibility for prior v2.\n\t\tif ( -1 !== newValue.indexOf( '|' ) ) {\n\t\t\tnewValue = newValue.replace( '/.*?\\|/', '' );\n\t\t}\n\n\t\tconst fontStack = sukiCustomizerPreviewData.fonts[ newValue ] || '';\n\n\t\t// Change CSS value.\n\t\tpostMessageCSS( key, rules, fontStack );\n\t};\n\n\tObject.keys( sukiCustomizerPreviewData.postMessages ).forEach( function( key ) {\n\t\tconst settingPostMessages = sukiCustomizerPreviewData.postMessages[ key ];\n\t\tconst settingPostMessagesByType = {};\n\n\t\tsettingPostMessages.forEach( function( rule ) {\n\t\t\tconst type = rule.type;\n\n\t\t\tif ( undefined === settingPostMessagesByType[ type ] ) {\n\t\t\t\tsettingPostMessagesByType[ type ] = [];\n\t\t\t}\n\n\t\t\tsettingPostMessagesByType[ type ].push( rule );\n\t\t} );\n\n\t\twp.customize( key, function( setting ) {\n\t\t\t// Bind setting value change.\n\t\t\tsetting.bind( function( value ) {\n\t\t\t\t// Process each postMessages type (CSS, class, HTML, font).\n\t\t\t\tObject.keys( settingPostMessagesByType ).forEach( function( type ) {\n\t\t\t\t\tswitch ( type ) {\n\t\t\t\t\t\tcase 'css':\n\t\t\t\t\t\t\tpostMessageCSS( key, settingPostMessagesByType[ type ], value );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'class':\n\t\t\t\t\t\t\tpostMessageClass( key, settingPostMessagesByType[ type ], value );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'html':\n\t\t\t\t\t\t\tpostMessageHTML( key, settingPostMessagesByType[ type ], value );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'font':\n\t\t\t\t\t\t\tpostMessageFont( key, settingPostMessagesByType[ type ], value );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t} );\n}\n\n/**\n * Reinit frontend JS after partial refresh\n */\ndocument.addEventListener( 'DOMContentLoaded', function() {\n\tif ( 'undefined' !== typeof wp && wp.customize && wp.customize.selectiveRefresh && wp.customize.widgetsPreview && wp.customize.widgetsPreview.WidgetPartial ) {\n\t\twp.customize.selectiveRefresh.bind( 'partial-content-rendered', function( placement ) {\n\t\t\t// Nav Menu\n\t\t\tif ( placement.partial.id.indexOf( 'nav_menu_instance' ) ) {\n\t\t\t\tsuki.initAll();\n\t\t\t}\n\t\t} );\n\t}\n} );\n"],"names":["undefined","sukiCustomizerPreviewData","postMessages","postMessageCSS","key","rules","newValue","styleID","cssArray","$style","document","getElementById","css","createElement","id","type","head","appendChild","textContent","forEach","rule","value","formattedValue","Array","isArray","sanitizedValue","map","subvalue","join","function","name","args","index","isNaN","array","split","scale","parts","newParts","part","i","number","parseFloat","unit","replace","toString","element","property","media","pattern","concatValue","valueItem","push","Object","keys","selectors","selector","properties","postMessageClass","elements","querySelectorAll","regex","RegExp","className","match","postMessageHTML","setAttribute","innerHTML","postMessageFont","indexOf","fontStack","fonts","settingPostMessages","settingPostMessagesByType","wp","customize","setting","bind","addEventListener","selectiveRefresh","widgetsPreview","WidgetPartial","placement","partial","suki","initAll"],"sourceRoot":""}